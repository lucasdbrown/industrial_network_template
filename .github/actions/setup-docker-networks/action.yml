name: Setup external Docker networks
description: |
  Reads static subnet mappings from subnets.txt (generated by get_subnets.sh)
  and creates any external:true networks before compose runs.

runs:
  using: composite
  steps:
    - name: Generate subnets.txt
      run: bash .github/actions/setup-docker-networks/get_subnets.sh
      shell: bash

    - name: Install Python dependencies
      run: python3 -m pip install --quiet --user pyyaml
      shell: bash

    - name: Create external networks
      run: python3 .github/actions/setup-docker-networks/setup_external_networks.py
      shell: bash